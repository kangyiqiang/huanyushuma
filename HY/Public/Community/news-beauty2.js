/*该文件是代替别人上线，并未维护。对接开发人员为:孔明 kongming */

/* user-club-circle/1.0.0 common.js Date:2016-03-17 16:22:41 */
seajs.use(["jdf/1.0.0/unit/globalInit/2.0.0/globalInit.js","jdf/1.0.0/unit/hotwords/1.0.0/hotwords","jdf/1.0.0/ui/lazyload/1.0.0/lazyload"],function(a,b){a(),b()});
/* user-club-circle/1.0.0 nav-club-2015.js Date:2016-03-17 16:22:40 */
$(function(){var a=parseInt($("#siteId").attr("value"));switch($("#nav-club-2015 .nav-box li").removeClass("current"),a){case 20000001:$("#nav-game").addClass("current");break;case 20000151:$("#nav-mobile").addClass("current");break;case 20000121:$("#nav-smart").addClass("current");break;case 20000391:$("#nav-photo").addClass("current");break;case 20000241:$("#nav-enter").addClass("current");break;case 20000541:$("#nav-beauty").addClass("current")}});
/* user-club-circle/1.0.0 g-scroll-beauty.js Date:2016-03-17 16:22:40 */
seajs.use(["jdf/1.0.0/ui/switchable/1.0.0/switchable","jdf/1.0.0/ui/lazyload/1.0.0/lazyload"],function(){var c=$("#g-scroll .num-ctrl-item").size();var d=pageConfig.wideVersion&&pageConfig.compatible;tWidth=d?1210:990,itemWidth=parseInt((tWidth+11)/c)-11,imgWidth=itemWidth-12,$("#g-scroll .num-ctrl-item").each(function(){$(this).width(itemWidth),$(this).find(".wrap_img").width(imgWidth),$(this).find(".wrap_img img").css("margin-left",-imgWidth/2),d&&6==c&&$(this).find(".wrap_img img").width(224),!d&&c>=5&&$(this).find(".wrap_img img").width(181).css("margin-left","-90px"),d&&3==c&&$(this).find(".wrap_img img").width(384)}),$("#g-scroll").switchable({type:"focus",hasPage:!0,navItem:"num-ctrl-item",mainClass:"silder-item",contentClass:"silder-panel",bodyClass:"slider-con",width:tWidth,speed:368,autoPlay:!0,navSelectedClass:"curr",seamlessLoop:!1,imgscrollLazyload:!0})});
/* user-club-circle/1.0.0 title-beauty.js Date:2016-03-17 16:22:40 */
seajs.use(["jdf/1.0.0/ui/switchable/1.0.0/switchable","jdf/1.0.0/ui/lazyload/1.0.0/lazyload"],function(){pageConfig.wideVersion&&pageConfig.compatible;if("undefined"!=typeof club_ads){var d=[],e=[],f=[],g=[];for(var h=0;h<club_ads.length;h++){f[h]=club_ads[h].kb;var i=club_ads[h].kb.split("/jfs/");g[h]=i[0]+"/s226x78_jfs/"+i[1],d[h]='<li class="silder-item">									<a href="'+club_ads[h].href+'" target="_blank">										<img class="err-product" src="//misc.360buyimg.com/lib/img/e/blank.gif" data-src="'+f[h]+'" alt="'+club_ads[h].alt+'"/>									</a>							</li>',e[h]='<div class="num-ctrl-item"><div class="zhezhao"></div><div class="des"></div><img src="'+g[h]+'"/><span class="cursor"></div></div>'}$("#g-scroll").html('<ul class="silder-panel">'+d.join("")+'</ul><div class="num-ctrl">'+(club_ads.length>1?e.join(""):"")+"</div>")}$("#g-scroll").switchable({type:"focus",hasPage:!0,navItem:"num-ctrl-item",mainClass:"silder-item",contentClass:"silder-panel",bodyClass:"slider-con",prevClass:"pre",nextClass:"next",width:1210,speed:368,autoPlay:!0,navSelectedClass:"curr",seamlessLoop:!0,callback:function(a){var c=this;var d=function(a){$("img",c.main[a]).each(function(){var a=$(this).attr("data-src");$(this).addClass("err-product"),a&&"done"!=a&&$(this).attr("src",a).attr("data-src","done")})};d(a)}})});
/* user-club-circle/1.0.0 hot-store-beauty.js Date:2016-03-17 16:22:40 */
$(function(){seajs.use(["jdf/1.0.0/ui/switchable/1.0.0/switchable"],function(){var b=pageConfig.wideVersion&&pageConfig.compatible;var c=b?5:4;$("#store").switchable({type:"slider",hasPage:!0,mainClass:"store-item",contentClass:"store-panel",bodyClass:"store-cont",prevClass:"prev",nextClass:"next",autoLock:!0,width:184,step:1,visible:c,speed:720}),$("#store .store-item").length<=c&&$("#store .prev, #store .next").hide()})});
/* user-club-circle/1.0.0 info-2015.js Date:2016-03-31 17:18:15 */
seajs.use(["user/club-circle/1.0.0/js/club.login.js"],function(a){var b=!1;var c={pin:readCookie("pin"),clstag:$("#container .user-panel").attr("date-clstag")||!1,loginTpl:'<div class="user-info"><div class="user-img"><a href="#none" target="_blank"><img src="${userIceInfo.imgUrl}" alt=""></a></div><div class="user-msg"><div class="user-name"><div class="inner-user-name"><a href="//me.jd.com" target="_blank" class="name_tit" title=${userIceInfo.nickname}>${userIceInfo.nickname}</a><span class="level">${gradeName}</span></div><div class="cursor"></div>{if diffIntegral==-1}<div class="progress clearfix"><span class="curr" style="width:100%;"></span></div>{else}<div class="progress clearfix"><span class="curr" style="width:${upgradeProcess}%;"></span></div>{/if}</div><div class="credit"><div class="item_credit">\u793e\u533a\u79ef\u5206<span class="num">${integral}</span></div>{if diffIntegral!=-1}<div class="item_credit">\u5347\u7ea7\u8fd8\u9700<span class="num">${diffIntegral}</span></div>{else}\u5df2\u7ecf\u6700\u9ad8\u7ea7\u4e86\u54df~{/if}</div></div><div class="user-info-line"></div></div><div class="msg-nums">\u53d1\u8d34 <span class="num"><a href="//group.jd.com/thread/mythread.htm" class="ftx-01" target="_blank">${postCount}</a></span><span class="fgf_zb">|</span>\u7ad9\u5185\u4fe1 <span class="num"><a '+(this.clstag?"clstag='"+this.clstag+"${messageCount}'":"")+' href="#none" class="ftx-01">${messageCount}</a></span></div><div class="user-circles"><div class="mt"><h3>\u6211\u7684\u5708\u5b50</h3></div><div class="mc"><ul>{for item in paramCircleList}<li><div class="item" title="${item.name}"><div class="item-img"><a href="//group.jd.com/circle/${siteId}/${item.id}.htm" target="_blank"><img src="${item.imageUrl}" alt="" height="40" width="40"></a></div><div class="circle-name ac"><a href="//group.jd.com/circle/${siteId}/${item.id}.htm" target="_blank">${item.name}</a></div></div></li>{/for}</ul></div></div><div class="checkin clearfix"><div class="checkin_left sign_left"><span class="icon"></span><span class="check_tit">\u7b7e\u5230</span></div><div class="checkin_left signed_left"><span class="icon"></span><span class="check_tit">\u5df2\u7b7e\u5230</span><div class="des">\u8fde\u7eed<span id="lx_num"> 1</span> \u5929</div></div><div class="checkin_right"><div class="time" id="getTime"></div><div class="peoples">\u4eca\u65e5\u7b7e\u5230<span class="num" id="sign_total"></span></div><div class="peoples rank1">\u6392\u540d<span class="num" id="rank"></span></div></div><div class="calendar"></div></div>',noLoginTpl:'<div class="user-info"><div class="user-img-unlogoin"><b></b></div><div class="user-msg"><div class="user-unlogin-txt">\u60a8\u8fd8\u6ca1\u6709\u767b\u5f55\u54e6~</div></div><div class="user-info-line"></div></div><div class="login-ops"><a href="#none" class="login-btn">\u767b\u5f55\u67e5\u770b\u6211\u7684\u4fe1\u606f</a></div><div class="user-circles"><div class="mt"><h3>\u4e3a\u4f60\u63a8\u8350</h3></div><div class="mc"><ul>{for item in paramCircleList}<li><div class="item" title="${item.name}"><div class="item-img"><a href="//group.jd.com/circle/${siteId}/${item.id}.htm" target="_blank"><img src="${item.imageUrl}" alt="" height="40" width="40"></a></div><div class="circle-name"><a href="//group.jd.com/circle/${siteId}/${item.id}.htm" target="_blank">${item.name}</a></div></div></li>{/for}</ul></div></div>',getMsgCount:function(){$.ajax({url:"//joycenter.jd.com/msgCenter/getUnreadNum.action",dataType:"jsonp",success:function(a){a.msgUnreadCount&&$(".msg-nums .num:last-child a").attr({href:"//joycenter.jd.com",target:"_blank"}).html(a.msgUnreadCount)}})},bindEventSigned:function(){$("body").bind("click",function(a){$(a.target);var d=$(".signed_left");var e=$(".calendar");if(d.is(a.target)||d.has(a.target).length>0)if(b)e.hide(),b=!b;else{var g=new f;e.show(),g.currentDay(),g.redraw(e,g.initDraw(e)),b=!b}else e.is(a.target)||e.has(a.target).length>0||(e.hide(),b=!b)})},fn_getdate:function(){var a=$.ajax({url:"/sign/getSignTime.htm?date="+new Date,async:!1,dataType:"jsonp"});a=JSON.parse(a.responseText).date,dataDate=a,a=a.substr(0,a.indexOf(" "));var b=a.split("-");var c=b[0]+"\u5e74"+b[1]+"\u6708"+b[2]+"\u65e5";return $("#getTime").html(c),dataDate},signVali:function(){var a=$("#user-panel").attr("data-siteid");var b=$(".sign_left");var d=$(".signed_left");$("#sign_total");var f=$("#rank");var g=$("#lx_num");var h=this.fn_getdate();var i=h.substr(0,10);var j=this;var k=$(".checkin_right");$.ajax({url:"/sign/getRankAndConsecutiveDays.htm",data:{dateStr:i},dataType:"jsonp",success:function(e){c.bindEventSigned(),e.result.rankAndConsecutiveDaysMap.rank&&1==e.success?(b.hide(),d.show(),g.html(e.result.rankAndConsecutiveDaysMap.ConsecutiveSignDays),j.getSignTotal(),f.html(e.result.rankAndConsecutiveDaysMap.rank),k.addClass("checkin_right_rank")):(k.removeClass("checkin_right_rank"),$(".checkin_left").bind("click",function(){$.ajax({url:"/sign/sign.htm",data:{signDateStr:h,siteId:a},dataType:"jsonp",success:function(){b.hide(),d.show(),$.ajax({url:"/sign/getRankAndConsecutiveDays.htm",data:{dateStr:i},dataType:"jsonp",success:function(a){f.html(a.result.rankAndConsecutiveDaysMap.rank),g.html(a.result.rankAndConsecutiveDaysMap.ConsecutiveSignDays),k.addClass("checkin_right_rank")}}),j.getSignTotal()}})}))},error:function(){}})},getSignTotal:function(){var a=$("#user-panel").attr("data-siteid");var b=$("#sign_total");$.ajax({url:"/sign/getSignCounts.htm",data:{siteId:a},dataType:"jsonp",success:function(a){a&&a.success&&b.html(a.result.signCounts)}})},init:function(){var b=this.pin,c=this;$("#user-panel").attr("data-siteid");a.checkLogin(function(d){$.ajax({url:"/column/myUserInfo.htm",data:{siteId:$("#user-panel").attr("data-siteid"),pin:d?b:""},dataType:"jsonp",success:function(b){if(b&&b.success&&b.result){var d;b.result.siteId=$("#user-panel").attr("data-siteid"),d=c.loginTpl.process(b.result),$("#container .user-panel").empty().html(d),c.getMsgCount(),c.getSignTotal(),c.signVali()}else{var d;b.result.siteId=$("#user-panel").attr("data-siteid"),d=c.noLoginTpl.process(b.result),$("#container .user-panel").empty().html(d),$(".user-panel .login-btn").bind("click",function(){a.login($.noop,!0)})}},error:function(){}})})}};c.init();var d=c.fn_getdate();var e={};function f(){this.nowMonth=null,this.nowYear=null,this.nowDate=null}f.prototype={getDates:function(a){var b=new Date(this.nowYear,a,0);return b.getDate()},getMonthOne:function(a){var b=new Date(this.nowYear,a,1);return b.getDay()},currentDay:function(){var a=d.split(" ")[0].split("-");this.nowMonth=a[1],this.nowYear=a[0]},getMonthList:function(a){var b=a;return $.each(b,function(a,c){b[a]=parseInt(c.substr(8,2))}),b},downM:function(a,b,c){var e=d.split(" ")[0].split("-");this.nowMonth>=parseInt(e[1])&&this.nowYear==parseInt(e[0])||(12==this.nowMonth?(this.nowMonth=1,this.nowYear=+this.nowYear+1):this.nowMonth=+this.nowMonth+1),b.html(this.nowYear+"\u5e74"+this.nowMonth+"\u6708"),this.redraw(a,c)},upM:function(a,b,c){this.nowMonth<=1?(this.nowMonth=12,this.nowYear=+this.nowYear-1):(this.nowMonth=+this.nowMonth-1,$(".prev_m_up").show()),b.html(this.nowYear+"\u5e74"+this.nowMonth+"\u6708"),this.redraw(a,c)},initDraw:function(a){var b=this;var c="<ul class='rili_b clearfix'>";for(var d=0;42>d;d++)c+="<li></li>";c+="</ul>",a.show(),a.html(""),a.html('<div class="months clearfix"><span class="prev m_up"></span><span class="next m_down"></span><span class="time_date">2015\u5e7407\u6708</span></div><div class="week clearfix"><span>\u65e5</span><span>\u4e00</span><span>\u4e8c</span><span>\u4e09</span><span>\u56db</span><span>\u4e94</span><span>\u516d</span></div><ul class="days clearfix">'+c);var e=$(".calendar .days").find("li");return $(".time_date").html(this.nowYear+"\u5e74"+this.nowMonth+"\u6708"),$(".m_down").click(function(){b.downM(a,$(".time_date"),e)}),$(".m_up").click(function(){b.upM(a,$(".time_date"),e)}),e},redraw:function(a,b){new Date;var f=this.getDates(this.nowMonth);var g=this.getMonthOne(this.nowMonth-1);var h=0;var i=0;var l=d.split(" ")[0].split("-");$(".rili_b li").show(),$(b).each(function(){$(this).html("").removeClass("checked").removeClass("curr").removeClass("afternow").removeClass("pnmonth")}),i=this.nowMonth-1>=0?this.nowMonth-1:this.nowMonth+11;var n=0;if(0!=g){for(h=0;g>h;h++)$(b[g-h-1]).addClass("pnmonth");if(n=(8-(f-6+g)%7)%7,0!=n)for(var o=h+f;h-1+f+n>=o;o++)$(b[o]).addClass("pnmonth")}else if(f%7!=0){if(n=7-f%7,0!=n)for(var o=f+1;f+1+n>=o;o++)$(b[o]).addClass("pnmonth")}else n=0;for(var o=1;f>=o;o++)$(b[o+h-1]).html(o),l[2]==o&&this.nowYear==parseInt(l[0])&&this.nowMonth==parseInt(l[1])&&$(b[o+h-1]).addClass("curr");$(".rili_b li").each(function(a){a>g+f+n-1&&$(this).hide()});var p=this;var q;var r=this.nowYear+"-"+this.nowMonth+"-"+f+" 23:59:59";if(e[r]){q=e[r];for(var o=1;f>=o;o++)q&&$.each(q,function(a){q[a]==o&&$(b[o+h-1]).addClass("checked")})}else $.ajax({url:"/sign/getMonthSignDays.htm",data:{dateStr:r},dataType:"jsonp",success:function(a){if(a&&a.success){q=p.getMonthList(a.result.signDaysList),e[r]=q;for(var c=1;f>=c;c++)q&&$.each(q,function(a){q[a]==c&&$(b[c+h-1]).addClass("checked")})}},error:function(){return!1}})}}});
