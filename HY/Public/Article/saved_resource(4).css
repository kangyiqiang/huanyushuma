/* user-club-circle/3.0.0 common.js Date:2016-05-05 17:36:04 */
seajs.use(["jdf/1.0.0/unit/globalInit/2.0.0/globalInit.js","jdf/1.0.0/unit/hotwords/1.0.0/hotwords","jdf/1.0.0/ui/lazyload/1.0.0/lazyload"],function(a,b){a(),b(),$(document).ready(function(){if($(".shade").height($("body").height()),$("#pageType").length){var a=$("#pageType")[0].value;var b=$(".me_side_circle li a");switch(b.removeClass("curr"),a){case"circle":b.eq(1).addClass("curr");break;case"follow":b.eq(2).addClass("curr");break;case"fans":b.eq(3).addClass("curr");break;case"thread":b.eq(4).addClass("curr")}}})});
/* user-club-circle/3.0.0 nav-club.js Date:2016-03-24 20:40:25 */
$(function(){var a=parseInt($("#siteId").attr("value"));switch($("#nav-club-2015 .nav-box li").removeClass("current"),a){case 20000001:$("#nav-game").addClass("current");break;case 20000151:$("#nav-mobile").addClass("current");break;case 20000121:$("#nav-smart").addClass("current");break;case 20000391:$("#nav-photo").addClass("current");break;case 20000241:$("#nav-enter").addClass("current");break;case 20000541:$("#nav-beauty").addClass("current")}});
/* user-club-circle/3.0.0 backpanel.js Date:2016-03-24 20:40:25 */
$(function(){function a(){}a.prototype={constructor:a,init:function(){this.obj=$("#backpanel-inner");this.obj.find(".bp-item-backtop");this.pos=[],$("#backpanel-inner .bp-item").bind("click",function(){var a=$(this).attr("data-top");a&&$("body,html").animate({scrollTop:a},500)}),b.scroll()},scroll:function(){var a=this;var b=this.obj.find(".bp-item-backtop");var c=null;$(window).bind("scroll",function(){c&&clearTimeout(c),c=setTimeout(function(){var c=document.body.scrollTop||document.documentElement.scrollTop;0==c?b.hide():b.show(),a.hightLight(c)},200)}),a.initCss(),$(window).bind("resize",function(){a.initCss()})},initCss:function(){var a,b=$("#backpanel-inner").width()+10;width=$("#backpanel").width(),cwidth=document.documentElement.clientWidth,a=cwidth>1024?$.browser.msie&&$.browser.version<=6?{right:"-40px"}:{right:((cwidth-width)/2-b>0?(cwidth-width)/2-b:0)+"px"}:{right:"0"},this.obj.css(a)},addCss:function(a){this.obj.css(a)},addItem:function(a){this.obj.append(a)},hightLight:function(a){$.each(this.pos,function(){return this.top<=a&&a<this.bottom?($("#backpanel ."+this.className).addClass("curr").siblings().removeClass("curr"),!1):void 0})}};var b=new a;b.init()});
/* user-club-circle/3.0.0 posts.js Date:2016-05-05 17:36:04 */
seajs.use(["jdf/1.0.0/unit/login/1.0.0/login","user/club-circle/3.0.0/js/combineShare","user/club-circle/3.0.0/js/jdfb","jdf/1.0.0/ui/countdown/1.0.0/countdown"],function(a,b){$(function(){var c=[];var d=0;var e="";var f=$(".sc");var g=1;var h=0;a.isLogin(function(a){a&&(h=1)});function i(a,b){$(a).stop(!1,!0).fadeOut(b)}$(".posts-tic img").each(function(){var a=$(this).width();var b=$(this).parent("p").length?$(this).parent("p").width():$(this).parents(".posts-tic").width();$(this).width(Math.min(a,.95*b))}),$(".comments .cont img").each(function(){var a=$(this).width();var b=$(this).parent("p").length?$(this).parent("p").width():$(this).parents(".cont").width();$(this).width(Math.min(a,.95*b))}),$(".posts-box img[src*=360buyimg]").each(function(){$(this).wrap("<a rel='j_group' href="+$(this).attr("src")+"></a>")}),$(".comments .cont img[src*=360buyimg]").each(function(){$(this).wrap("<a rel='j_group' href="+$(this).attr("src")+"></a>")}),$("a[rel=j_group]").jdfb({autoSize:!1,autoResize:!1,openEffect:"fade",closeEffect:"fade",prevEffect:"fade",nextEffect:"fade",openSpeed:"slow",closeSpeed:"slow",nextSpeed:"slow",prevSpeed:"slow",closeBtn:!0}),$(".btns_right").delegate(".fav","click",function(){var b=$(this);a({modal:!0,complete:function(){$.ajax(b.hasClass("fav_has")?{url:"/thread/cancelcollect.htm",type:"post",data:{threadid:$("#threadId").val()},dataType:"json",success:function(a){if(a.success){var c=$('<span class="popup_fav pop_fav_fail clearfix" style="display:inline-block;"><span class="pop_icon"></span>\u5df2\u53d6\u6d88\u6536\u85cf</span>').appendTo(b);b.removeClass("fav_has"),setTimeout(function(){c.fadeOut().remove()},1e3)}else alert("\u53d6\u6d88\u6536\u85cf\u64cd\u4f5c\u5931\u8d25")},error:function(a,b,c){alert("\u63a5\u53e3\u9519\u8bef"+c)}}:{url:"/thread/collect.htm",type:"post",data:{threadid:$("#threadId").val()},dataType:"json",success:function(a){if(a.success){var c=$('<span class="popup_fav pop_fav_suc clearfix" style="display:inline-block;"><span class="pop_icon"></span>\u6536\u85cf\u6210\u529f</span>').appendTo(b);b.addClass("fav_has"),setTimeout(function(){c.fadeOut().remove()},1e3)}else alert("\u6536\u85cf\u64cd\u4f5c\u5931\u8d25")},error:function(a,b,c){alert("\u63a5\u53e3\u9519\u8bef"+c)}})}})}).delegate(".share","click",function(){var a=[];$(".posts-box img").each(function(){a.push($(this).attr("src"))});var c={title:$(".posts-tit h1 a").text(),content:"@\u4eac\u4e1c \u6700in\u98ce:"+$(".posts-tit h1 a").text()+" \u4f60\u4e0d\u80fd\u9519\u8fc7\u7684\u793e\u533a\u8d44\u8baf\uff0c\u731b\u6233",imgs:a.length>0?a:$("#circle-image").val(),href:window.location.href};new b({sid:3,rid:1,title:c.title,content:c.content,url:c.href,imgs:c.imgs,onbeforeOpen:function(){}})});function j(a,b,c){$.ajax({type:"GET",url:"/agree/getThreadAgreeListById.htm?id="+$("#threadId").val()+"&count=20",dataType:"jsonp",success:function(d){if(d.success){c='<span class="avatar"><span class="icon_zan"></span></span>',a=d.result.imgList,b=a.length,f.hasClass("show-all")?b>=20&&(b=20):b>=5&&(b=5);for(var e=0;b>e;e++)c+='<a href="#none" target="_blank" class="avatar"><img src="'+a[e]+'"></a>';f.html(c+'<span class="avatar"><span class="icon_end"></span></span>')}}})}j(c,d,e),$(".btns_right").delegate(".zan","click",function(){var b=$(this);a({modal:!0,complete:function(){var a=$("#threadId").val();b.hasClass("time-protect")||$.ajax(b.hasClass("zan_has")?{type:"GET",url:"/agree/cancleAgree.htm?id="+a+"&type=1",dataType:"jsonp",success:function(a){a.success&&(b.removeClass("zan_has").addClass("time-protect").html('<span class="icon"></span>\u8d5e\uff08'+a.result.heart+"\uff09"),setTimeout(function(){$(".zan").removeClass("time-protect")},2e3),j(c,d,e))}}:{type:"GET",url:"/agree/agree.htm?id="+a+"&type=1",dataType:"jsonp",success:function(a){if(a.success)b.addClass("zan_has time-protect").html('<span class="icon"></span>\u8d5e\uff08'+a.result.heart+"\uff09"),setTimeout(function(){$(".zan").removeClass("time-protect")},2e3),j(c,d,e);else{var e="";e=40==a.resultCode?"\u53c2\u6570\u4e0d\u5408\u6cd5":5==a.resultCode?"\u9ed1\u540d\u5355\u7528\u6237\u65e0\u6cd5\u70b9\u8d5e":"\u4e0d\u80fd\u91cd\u590d\u70b9\u8d5e",$(".btns_right").append('<span class="popup_fav popup_zan clearfix"><span class="pop_icon pop_icon_zan"></span><span class="pop-content">'+e+"</span></span>"),setTimeout(function(){$(".pop_icon_zan").parent().fadeOut().remove()},1e3)}}})}})}),f.delegate(".avatar:last","click",function(){$(this);if(g+=1,f.hasClass("show-all")){var h=d;g%2!=0?h>=5&&(h=5):h=d,e='<span class="avatar"><span class="icon_zan"></span></span>';for(var i=0;h>i;i++)e+='<a href="#none" target="_blank" class="avatar"><img src="'+c[i]+'"></a>';f.html(e+'<span class="avatar"><span class="icon_end"></span></span>')}else $.ajax({type:"GET",url:"/agree/getThreadAgreeListById.htm?id="+$("#threadId").val()+"&count=20",dataType:"jsonp",success:function(a){if(a.success){e='<span class="avatar"><span class="icon_zan"></span></span>',c=a.result.imgList,d=c.length,d>=20&&(d=20);for(var b=0;d>b;b++)e+='<a href="#none" target="_blank" class="avatar"><img src="'+c[b]+'"></a>';f.addClass("show-all").html(e+'<span class="avatar"><span class="icon_end"></span></span>')}}})}),$(".phone").hover(function(){var a=$(this);a.hasClass("phone-code")||$.ajax({type:"GET",url:"/qrcode/getQrCode.htm?threadId="+$("#threadId").val(),dataType:"jsonp",success:function(b){b.success&&a.addClass("phone-code").find(".erweima img").attr("src",b.result.imgUrl)}})},function(){}),$(".opt-btns .jubao").click(function(){$(this).find(".popup_jubao").fadeIn()}),$(".jubao").delegate(".close","click",function(){$(this).parents(".popup_jubao").fadeOut()}).delegate(".btn","click",function(){var a=$(this);a.parents(".popup_jubao").fadeOut(),a.parents(".jubao").find(".popup_jubao_suc").fadeIn(),i(".popup_jubao_suc")});function k(b,c,d){$.ajax({type:"GET",dataType:"jsonp",url:"/thread/personalLetter.htm?id="+c+"&type="+d,success:function(c){if(b.data("hasPost",1),c.success){b.attr("target","_blank").attr("href","//joycenter.jd.com/msgCenter/queryLetter.action?t="+(new Date).getTime()+"&session="+c.result.sessionId);var d=b.attr("href");var e=setInterval(function(){d.match("joycenter")&&(window.open(b.attr("href")),clearInterval(e))},100)}else 18==c.resultCode?b.click(function(){a({modal:!0,complete:function(){window.location.reload(!0)}})}):b.parents(".popup_avatar")&&b.click(function(){b.parents(".popup_avatar").append('<span class="popup_fav popup_sixin clearfix"><span class="pop_icon pop_icon_zan"></span><span class="pop-content">\u4e0d\u597d\u610f\u601d\uff0cTA\u56de\u706b\u661f\u4e86\uff0c\u6682\u65f6\u8054\u7cfb\u4e0d\u5230</span></span>'),setTimeout(function(){$(".popup_sixin").fadeOut().remove()},1e3)})},error:function(){}})}if($(".comments .avatar").hover(function(){var a=$(this);var b=a.find(".popup_avatar");b.stop(!1,!0).fadeIn(500)}),$(".comments .item").mouseleave(function(){i(".popup_avatar",500)}),$(".user-panel").find(".email").click(function(){var b=$(this);1!=b.data("hasPost")&&k(b,$("#threadId").val(),1)}),$(".comments .avatar").find(".email").each(function(a,b){$(b).click(function(){1!=$(b).data("hasPost")&&k($(b),$(b).parents(".avatar").siblings(".des").find(".st").attr("data_id"),2)})}),$.browser.msie&&$.browser.version<=6);else{function n(){var a=null;var b=$(".editor");b.height();var d=b.eq(0).offset().top;var e=$(".reply_short");var f=$(window).height();function g(){a&&clearTimeout(a),a=setTimeout(function(){f+$(window).scrollTop()>=d?e.hide():e.fadeIn(200)},50)}$(window).bind("scroll",function(){1==h&&g()})}n()}})});
/* user-club-circle/3.0.0 info.js Date:2016-04-26 16:29:14 */
seajs.use(["jdf/1.0.0/unit/login/1.0.0/login.js"],function(a){$(function(){var b={calClose:!1,init:function(){var b=null;var c=null;var d=this;a.isLogin(function(a){a&&($.ajax({type:"GET",dataType:"jsonp",url:"//joycenter.jd.com/msgCenter/getUnreadNum.action",success:function(a){a.result&&(b=a,$(".grid-1200").append('<div class="myclub"><div class="tit"><div class="inner_tit"><span class="icon"></span><span class="txt">\u6211\u7684\u793e\u533a</span><span class="cursor"></span></div></div><div class="num">'+b.msgUnreadCount+'</div><div class="popup" style="display: none;"><div class="top clearfix"><div class="avatar"><img src=""></div><div class="des"><div class="name">&nbsp;&nbsp;<span class="level"></span></div><div class="wrap_rank"><span class="rank "></span><a href="//vip.jd.com/" target="_blank"></a></div></div></div><div class="middle"><div class="item clearfix"><div class="st">\u6211\u7684\u5708\u5b50</div><a href="//group.jd.com/circle/myjoincircle.htm" target="_blank"></a></div><div class="item clearfix"><div class="st">\u6211\u7684\u5e16\u5b50</div><a href="//group.jd.com/thread/mythread.htm" target="_blank"></a></div><div class="item clearfix"><div class="st">\u6211\u7684\u6536\u85cf</div><a href="//group.jd.com/thread/mythread.htm"></a></div><div class="item clearfix"><div class="st">\u6211\u7684\u6d88\u606f</div><a href="//joycenter.jd.com/msgCenter/queryHistoryMessage.action" target="_blank" class="msg"><span class="msg_num">'+b.msgUnreadCount+'</span>\u6761\u672a\u8bfb</a></div></div><div class="check clearfix"><div class="icon"></div><div class="txt">\u7b7e\u5230</div><div class="fenge">|</div><div class="des">\u8fde\u7eed\u7b7e\u5230\u7ecf\u9a8c\u53e0\u52a0</div></div><div class="checked clearfix"><div class="icon"></div><div class="txt">3\u670812\u65e5</div><div class="fenge"></div><div class="des">\u8fde\u7eed\u7b7e\u52302\u5929<br>98%\u7528\u6237\u88ab\u8d85\u8d8a</div></div></div></div>'),$.ajax({type:"GET",dataType:"jsonp",url:"/column/myNewUserInfo.htm",success:function(a){if(a.success){var b=$(".myclub");var e=$(".middle");b.find(".avatar img").attr("src",a.result.userIceInfo.imgUrl),b.find(".name").html(a.result.userIceInfo.nickname),b.find(".level").html(a.result.gradeName),b.find(".rank").addClass(a.result.urank),b.find(".wrap_rank a").html(a.result.userIceInfo.uclassName),e.find(".item").eq(0).find("a").html(a.result.circleCount),e.find(".item").eq(1).find("a").html(a.result.threadCount),e.find(".item").eq(2).find("a").html(a.result.collectCount),$(".reply_short .inner .avatar img").attr("src",a.result.userIceInfo.imgUrl),$(".editor .avatar img").attr("src",a.result.userIceInfo.imgUrl),c=d.fn_getdate();var f=setInterval(function(){c&&(d.signVali(c),clearInterval(f))},100)}}}))}}),$("#nav-club-2015").delegate(".myclub","mouseenter",function(){var b=$(this);b.addClass("myclub_unfold"),b.find(".popup").show()}).delegate(".myclub","mouseleave",function(){$(this).removeClass("myclub_unfold"),$(this).find(".popup").hide(),$(this).find(".calendar").hide().removeClass("calendar-show")}),$("#nav-club-2015").delegate(".check","click",function(){$(this).hide().siblings(".checked").fadeIn()}))})},fn_getdate:function(){var a=$.ajax({url:"/sign/getSignTime.htm?date="+new Date,async:!1,dataType:"jsonp"});a=JSON.parse(a.responseText).date,dataDate=a,a=a.substr(0,a.indexOf(" "));var b=a.split("-");var c=b[1]+"\u6708"+b[2]+"\u65e5";return $(".checked .txt").html(c),dataDate},signVali:function(a){var b=this;var c=$("#siteId").val();var d=a;var e=d.substr(0,10);$.ajax({url:"/sign/getRankAndConsecutiveDays.htm",data:{dateStr:e},dataType:"jsonp",success:function(a){a.success&&a.result.rankAndConsecutiveDaysMap.rank?($(".myclub").append('<div class="calendar"></div>'),$(".calendar").hide(),b.bindEventSigned(),$(".check").hide(),$(".checked").css("display","block").find(".des").html("\u8fde\u7eed\u7b7e\u5230"+a.result.rankAndConsecutiveDaysMap.ConsecutiveSignDays+"\u5929")):$(".myclub").delegate(".check","click",function(){$.ajax({url:"/sign/sign.htm",data:{signDateStr:d,siteId:c},dataType:"jsonp",success:function(){$(".check").hide(),$(".checked").show(),$.ajax({url:"/sign/getRankAndConsecutiveDays.htm",data:{dateStr:e},dataType:"jsonp",success:function(a){$(".checked").find(".des").html("\u8fde\u7eed\u7b7e\u5230"+a.result.rankAndConsecutiveDaysMap.ConsecutiveSignDays+"\u5929"),$(".myclub").append('<div class="calendar"></div>'),$(".calendar").hide(),b.bindEventSigned()}})}})})},error:function(){}})},bindEventSigned:function(){$("body").bind("click",function(a){$(a.target);var c=$(".checked");var d=$(".calendar");if(c.is(a.target)||c.has(a.target).length>0)if(d.hasClass("calendar-show"))d.hide().removeClass("calendar-show");else{var f=new e;d.show().addClass("calendar-show"),f.currentDay(),f.redraw(d,f.initDraw(d))}else d.is(a.target)||d.has(a.target).length>0||d.hide().removeClass("calendar-show")})}};b.init();var c=b.fn_getdate();var d={};function e(){this.nowMonth=null,this.nowYear=null,this.nowDate=null}e.prototype={getDates:function(a){var b=new Date(this.nowYear,a,0);return b.getDate()},getMonthOne:function(a){var b=new Date(this.nowYear,a,1);return b.getDay()},currentDay:function(){var a=c.split(" ")[0].split("-");this.nowMonth=a[1],this.nowYear=a[0]},getMonthList:function(a){var b=a;return $.each(b,function(a,c){b[a]=parseInt(c.substr(8,2))}),b},downM:function(a,b,d){var e=c.split(" ")[0].split("-");this.nowMonth>=parseInt(e[1])&&this.nowYear==parseInt(e[0])||(12==this.nowMonth?(this.nowMonth=1,this.nowYear=+this.nowYear+1):this.nowMonth=+this.nowMonth+1),b.html(this.nowYear+"\u5e74"+this.nowMonth+"\u6708"),this.redraw(a,d)},upM:function(a,b,c){this.nowMonth<=1?(this.nowMonth=12,this.nowYear=+this.nowYear-1):(this.nowMonth=+this.nowMonth-1,$(".prev_m_up").show()),b.html(this.nowYear+"\u5e74"+this.nowMonth+"\u6708"),this.redraw(a,c)},initDraw:function(a){var b=this;var c="<ul class='rili_b clearfix'>";for(var d=0;42>d;d++)c+="<li></li>";c+="</ul>",a.show(),a.html(""),a.html('<div class="months clearfix"><span class="prev m_up"></span><span class="next m_down"></span><span class="time_date">2015\u5e7407\u6708</span></div><div class="week clearfix"><span>\u65e5</span><span>\u4e00</span><span>\u4e8c</span><span>\u4e09</span><span>\u56db</span><span>\u4e94</span><span>\u516d</span></div><ul class="days clearfix">'+c);var e=$(".calendar .days").find("li");return $(".time_date").html(this.nowYear+"\u5e74"+this.nowMonth+"\u6708"),$(".m_down").click(function(){b.downM(a,$(".time_date"),e)}),$(".m_up").click(function(){b.upM(a,$(".time_date"),e)}),e},redraw:function(a,b){new Date;var f=this.getDates(this.nowMonth);var g=this.getMonthOne(this.nowMonth-1);var h=0;var i=0;var l=c.split(" ")[0].split("-");$(".rili_b li").show(),$(b).each(function(){$(this).html("").removeClass("checked").removeClass("curr").removeClass("afternow").removeClass("pnmonth")}),i=this.nowMonth-1>=0?this.nowMonth-1:this.nowMonth+11;var n=0;if(0!=g){for(h=0;g>h;h++)$(b[g-h-1]).addClass("pnmonth");if(n=(8-(f-6+g)%7)%7,0!=n)for(var o=h+f;h-1+f+n>=o;o++)$(b[o]).addClass("pnmonth")}else if(f%7!=0){if(n=7-f%7,0!=n)for(var o=f+1;f+1+n>=o;o++)$(b[o]).addClass("pnmonth")}else n=0;for(var o=1;f>=o;o++)$(b[o+h-1]).html(o),l[2]==o&&this.nowYear==parseInt(l[0])&&this.nowMonth==parseInt(l[1])&&$(b[o+h-1]).addClass("curr");$(".rili_b li").each(function(a){a>g+f+n-1&&$(this).hide()});var p=this;var q;var r=this.nowYear+"-"+this.nowMonth+"-"+f+" 23:59:59";if(d[r]){q=d[r];for(var o=1;f>=o;o++)q&&$.each(q,function(a){q[a]==o&&$(b[o+h-1]).addClass("checked")})}else $.ajax({url:"/sign/getMonthSignDays.htm",data:{dateStr:r},dataType:"jsonp",success:function(a){if(a&&a.success){q=p.getMonthList(a.result.signDaysList),d[r]=q;for(var c=1;f>=c;c++)q&&$.each(q,function(a){q[a]==c&&$(b[c+h-1]).addClass("checked")})}},error:function(){return!1}})}}})});
/* user-club-circle/3.0.0 side-recommend-sku.js Date:2016-03-24 20:40:25 */
$(function(){if(window.club_ads)if(1==club_ads.success){var a=[],c=[];var d=club_ads.result.groupProductAdvertVoList;var e=d.length;$("#g-slider .page_total").html(e);var f=0;for(var g=0;e>g;g++)a[g]='<li class="silder-item">					<a href="'+d[g].proDetailUrl+'" target="_blank" title="'+d[g].proName+'">						<img src="'+pageConfig.FN_GetImageDomain(d[g].skuId)+"n2/"+d[g].imagePath+'" alt="'+d[g].proName+'"/> 					</a>					<a href="'+d[g].proDetailUrl+'" target="_blank" class="title" title="'+d[g].proName+'">'+d[g].proName+'</a>					<span class="price J_'+d[g].skuId+'">\uffe5<span class="num">'+d[g].price+'</span></span>					<a href="//cart.jd.com/gate.action?pid='+d[g].skuId+'&pcount=1&ptype=1" class="add" target="_blank"><span class="icon"></span>\u52a0\u5165\u8d2d\u7269\u8f66</a>					</li>',c.push("J_"+d[g].skuId);if($("#g-slider .silder-panel").html(a.join("")),$.ajax({url:"//p.3.cn/prices/mgets",dataType:"jsonp",data:{skuids:c.join(",")},success:function(a){$.each(a,function(){$("."+this.id).html("\uffe5"+this.p)})}}),$("#g-slider .silder-item").length>=1){var h=$("#g-slider .silder-item").eq(0).width();var i=$("#g-slider .silder-panel");var j=e*h;i.css("width",j);function k(a){a>e-1?a=0:0>a&&(a=e-1),i.animate({left:-(a*h)+"px"},500),f=a,$("#g-slider .page_curr").html(a+1)}$("#g-slider").delegate(".prev","click",function(){f--,k(f)}),$("#g-slider").delegate(".next","click",function(){f++,k(f)})}}else $(".side-sku").hide();else $(".side-sku").hide()});
