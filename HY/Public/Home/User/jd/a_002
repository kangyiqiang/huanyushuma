/* common.js Date:2017-05-09 14:53:39 */
$(function(){pageConfig.hfInit||(pageConfig.hfInit=!0,seajs.use(["//misc.360buyimg.com/jdf/1.0.0/unit/globalInit/2.0.0/globalInit.js","//misc.360buyimg.com/jdf/1.0.0/unit/hotwords/1.0.0/hotwords"],function(a,b){a(),b()}))}),seajs.use(["//misc.360buyimg.com/user/myjd-2015/js/fas"],function(){var b={init:function(){this.setSelectItem(),this.loadAds(),this.bindEvent(),this.loadExtraMenu()},setSelectItem:function(){var a=$("body").attr("myjd");$("#"+a).addClass("curr")},loadAds:function(){pageConfig.asyncScript("//nfa.jd.com/loadFa.js?aid=2_959_6296-2_959_6297")},loadExtraMenu:function(){$("body").attr("myjd");$.ajax({url:"//joycenter.jd.com/msgCenter/getUnreadNum.action",dataType:"jsonp",success:function(a){if(a.msgUnreadCount){{a.msgUnreadCount>99?"n+":a.msgUnreadCount}$(".fore-5 a[tid=_MYJD_joy]").append("<i>"+a.msgUnreadCount+"</i>")}}}),$.ajax({url:"//btshow.jd.com/ious/queryBT.do",dataType:"jsonp",data:{sourceType:135},scriptCharset:"utf-8",success:function(a){if(a){var b=$("body").attr("myjd");$("#_MYJD_credit").html('<a target="_blank" class="'+("_MYJD_credit"==b?" curr":"")+'" clstag="homepage|keycount|home2013|hbt" tag="213" href='+a.btList[0].btUrl+">"+a.btList[0].btName+"</a>")}}}),$.getJSON("//mygiftcard.jd.com/service/getGiftCardCount.action?callback=?",function(a){a.GiftCardCount&&$("#_MYJD_card a").after("<b>("+(a.GiftCardCount>99?"99+":a.GiftCardCount)+")</b>")}),$.getJSON("//mygiftcard.jd.com/service/getBookCardCount.action?callback=?",function(a){a.BookCardCount&&$("#_MYJD_bookcard a").after("<b>("+(a.BookCardCount>99?"99+":a.BookCardCount)+")</b>")}),$.getJSON("//quan.jd.com/getcouponcount.action?callback=?",function(a){a.CouponCount&&$("#_MYJD_ticket a").after("<b>("+(a.CouponCount>99?"99+":a.CouponCount)+")</b>")}),$.ajax({url:"//corp.jd.com/publicSoa/userInfo/getUserLevel",dataType:"jsonp",data:{pin:decodeURIComponent(readCookie("pin"))},success:function(a){a.success&&90==a.userLevel&&($("#_MYJD_ts").after('<dd class="fore4_0" id="_MYJD_qyzq1"> <a clstag="homepage|keycount|home2013|Homeqyzq1" href="//corp.jd.com/user/main" target="_self">\u4f01\u4e1a\u4e13\u533a&nbsp;<img width="24" height="11" src="//misc.360buyimg.com/jd2008/skin/df/i/myjd-new-ico.png"></a> </dd>'),$("#nav .navitems .fore-3 .dd").append('<a tid="_MYJD_qyzq2" clstag="Homeqyzq2" href="//corp.jd.com/user/main" target="_self"><span>\u4f01\u4e1a\u4e13\u533a</span></a>'))}})},bindEvent:function(){var a;$(".navitems .dl").hover(function(){var b=this;clearTimeout(a),a=setTimeout(function(){$(b).addClass("hover")},300)},function(){var b=this;clearTimeout(a),$(b).removeClass("hover")})}};b.init()});/* user-myjd-2015 home-media.js md5:5a080214eb7d2f40475123fba5233d0f */
!function(a){var b={};a.respond=b,b.update=function(){};var c=[],d=function(){var b=!1;try{b=new a.XMLHttpRequest}catch(c){b=new a.ActiveXObject("Microsoft.XMLHTTP")}return function(){return b}}(),e=function(a,b){var c=d();c&&(c.open("GET",a,!0),c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&304!==c.status||b(c.responseText)},4!==c.readyState&&c.send(null))},f=function(a){return a.replace(b.regex.minmaxwh,"").match(b.regex.other)};if(b.ajax=e,b.queue=c,b.unsupportedmq=f,b.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,comments:/\/\*[^*]*\*+([^/][^*]*\*+)*\//gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw:/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,minmaxwh:/\(\s*m(in|ax)\-(height|width)\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/gi,other:/\([^\)]*\)/g},b.mediaQueriesSupported=a.matchMedia&&null!==a.matchMedia("only all")&&a.matchMedia("only all").matches,!b.mediaQueriesSupported){var q,r,s,g=a.document,h=g.documentElement,i=[],j=[],k=[],l={},m=30,n=g.getElementsByTagName("head")[0]||h,o=g.getElementsByTagName("base")[0],p=n.getElementsByTagName("link"),t=function(){var a,b=g.createElement("div"),c=g.body,d=h.style.fontSize,e=c&&c.style.fontSize,f=!1;return b.style.cssText="position:absolute;font-size:1em;width:1em",c||(c=f=g.createElement("body"),c.style.background="none"),h.style.fontSize="100%",c.style.fontSize="100%",c.appendChild(b),f&&h.insertBefore(c,h.firstChild),a=b.offsetWidth,f?h.removeChild(c):c.removeChild(b),h.style.fontSize=d,e&&(c.style.fontSize=e),a=s=parseFloat(a)},u=function(b){var c="clientWidth",d=h[c],e="CSS1Compat"===g.compatMode&&d||g.body[c]||d,f={},l=p[p.length-1],o=(new Date).getTime();if(b&&q&&m>o-q)return a.clearTimeout(r),void(r=a.setTimeout(u,m));q=o;for(var v in i)if(i.hasOwnProperty(v)){var w=i[v],x=w.minw,y=w.maxw,z=null===x,A=null===y,B="em";x&&(x=parseFloat(x)*(x.indexOf(B)>-1?s||t():1)),y&&(y=parseFloat(y)*(y.indexOf(B)>-1?s||t():1)),w.hasquery&&(z&&A||!(z||e>=x)||!(A||y>=e))||(f[w.media]||(f[w.media]=[]),f[w.media].push(j[w.rules]))}for(var C in k)k.hasOwnProperty(C)&&k[C]&&k[C].parentNode===n&&n.removeChild(k[C]);k.length=0;for(var D in f)if(f.hasOwnProperty(D)){var E=g.createElement("style"),F=f[D].join("\n");E.type="text/css",E.media=D,n.insertBefore(E,l.nextSibling),E.styleSheet?E.styleSheet.cssText=F:E.appendChild(g.createTextNode(F)),k.push(E)}},v=function(a,c,d){var e=a.replace(b.regex.comments,"").replace(b.regex.keyframes,"").match(b.regex.media),g=e&&e.length||0;c=c.substring(0,c.lastIndexOf("/"));var h=function(a){return a.replace(b.regex.urls,"$1"+c+"$2$3")},k=!g&&d;c.length&&(c+="/"),k&&(g=1);for(var l=0;g>l;l++){var m,n,o,p;k?(m=d,j.push(h(a))):(m=e[l].match(b.regex.findStyles)&&RegExp.$1,j.push(RegExp.$2&&h(RegExp.$2))),o=m.split(","),p=o.length;for(var q=0;p>q;q++)n=o[q],f(n)||i.push({media:n.split("(")[0].match(b.regex.only)&&RegExp.$2||"all",rules:j.length-1,hasquery:n.indexOf("(")>-1,minw:n.match(b.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:n.match(b.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}u()},w=function(){if(c.length){var b=c.shift();e(b.href,function(c){v(c,b.href,b.media),l[b.href]=!0,a.setTimeout(function(){w()},0)})}},x=function(){for(var b=0;b<p.length;b++){var d=p[b],e=d.href,f=d.media,g=d.rel&&"stylesheet"===d.rel.toLowerCase();e&&g&&!l[e]&&(d.styleSheet&&d.styleSheet.rawCssText?(v(d.styleSheet.rawCssText,e,f),l[e]=!0):(!/^([a-zA-Z:]*\/\/)/.test(e)&&!o||e.replace(RegExp.$1,"").split("/")[0]===a.location.host)&&("//"===e.substring(0,2)&&(e=a.location.protocol+e),c.push({href:e,media:f})))}w()};x(),b.update=x,b.getEmValue=t;function y(){u(!0)}a.addEventListener?a.addEventListener("resize",y,!1):a.attachEvent&&a.attachEvent("onresize",y)}}(this),$("body").append('<link href="//misc.360buyimg.com/user/myjd-2015/widget/home-media/respond-proxy.html" id="respond-proxy" rel="respond-proxy" /><link href="respond.proxy.gif" id="respond-redirect" rel="respond-redirect" /><script src="respond.proxy.js"></script>');
/* userinfo.js Date:2017-03-07 16:09:31 */
seajs.use(["//misc.360buyimg.com/user/myjd-2015/js/Class","jdf/1.0.0/unit/trimPath/1.0.0/trimPath.js"],function(a){var c=new a;c.extend({btTPL0:'<div>\u767d\u6761\u989d\u5ea6</div>					<div><a clstag="click|keycount|wdjd|ljjh" href="${href}" target="_blank" ><span class="baitiao-limit">?\u5143</span></a></div>					<div><a clstag="click|keycount|wdjd|ljjh" class="alink" href="${href}" target="_blank">${bStatus}</a></div>',btTPL1:'<div>\u767d\u6761\u6b20\u6b3e<span class="ftx03">\uff08\u5143\uff09</span></div>					<div class="ftx01 "><a clstag="homepage|keycount|home2013|Hometopbt" href="${href}" target="_blank" >{if debt>0}<em>${debt}</em>{else}0.00{/if}</a></div>					<div>\u767d\u6761\u989d\u5ea6</div>					<div><a clstag="homepage|keycount|home2013|Hometopbte" href="${href}" target="_blank" >{if limit>0}<em>${limit}</em>{else}0.00{/if}</a></div>',btTPL2:'<div>\u91d1\u91c7\u6b20\u6b3e<span class="ftx03">\uff08\u5143\uff09</span></div>					<div class="ftx01 "><a clstag="homepage|keycount|home2013|Hometopbt" href="${href}" target="_blank" >{if debt>0}<em>${debt}</em>{else}0.00{/if}</a></div>					<div>\u91d1\u91c7\u989d\u5ea6</div>					<div><a clstag="homepage|keycount|home2013|Hometopbte" href="${href}" target="_blank" >{if limit>0}<em>${limit}</em>{else}0.00{/if}</a></div>',xjkTPL:'<div id="income">\u6628\u5929\u6536\u76ca<span class="ftx03">\uff08\u5143\uff09</span></div>					<div class="ftx01 profit"><a class="ftx01 jk-income" href="//jinku.jd.com/xjk/income.action" >{if income>0}<em>${income}</em>{else}0.00{/if}</a>{if balance>0}<span class="btn-hide">\u9690\u85cf</span>{/if}<span clstag="homepage|keycount|home2013|Hometopyc" class="btn-show">\u663e\u793a\u6536\u76ca\u548c\u91d1\u989d</span></div>					<div id="balance"><a href="//jinku.jd.com/xjk/income.action">\u5c0f\u91d1\u5e93</a>\uff1a<a class="jk-total" href="//jinku.jd.com/xjk/income.action" >{if balance>0}<em>${balance}</em>{else}0.00{/if}</a></div>					{if balance>0}					<div id="xjk0" class="mb" ><a href="//trade.jr.jd.com/pay/topayin.action" target="_blank" class="alink">\u8f6c\u5165</a><a href="//trade.jr.jd.com/pay/topayout.action" target="_blank" class="alink ml10">\u8f6c\u51fa</a></div>					{else}					<div id="xjk0"><a class="alink" target="_blank" href="//trade.jr.jd.com/pay/topayin.action" >\u8f6c\u5165\u5c0f\u91d1\u5e93\uff0c\u9a6c\u4e0a\u8d5a\u94b1</a></div>					{/if}'}),c.include({init:function(){var a=this;this.ajaxAction({url:"//order.jd.com/lazy/getOrderListCountJson.action",callback:function(a){$("#user-info #waitPay").text(a.info.waitPay),$("#user-info #waitReceive").text(a.info.waitReceive),$("#user-info #waitPick").text(a.info.waitPick),$("#user-info #productCount").text(a.info.waitComment)}}),this.ajaxAction({url:"//home.jd.com/2014/data/account/profile.action?t="+(new Date).getTime(),callback:function(a){$("#BalanceCount").html(a.balance>0?"<em>"+a.balance+"</em>":"0.00"),$("#LipinkaCount").html(a.lipinka>0?"<em>"+a.lipinka+"</em>":"0"),$("#JingdouCount").html("<em>"+a.jingdou+"</em>"),$("#CouponCount").html(a.coupon>0?"<em>"+(a.coupon>99?"99+":a.coupon)+"</em>":"0"),$("#CouponCount").parent().after('<div>	                                        <label>\u901a\u4fe1B\uff1a</label>	                                        <a clstag="homepage|keycount|home2013|Hometopb" class="mr5" href='+(a.burl?a.burl:"//sale.jd.com/act/mA8nbHJMU2.html")+' id="BValue">'+(a.b>0?"<em>"+a.b+"</em>":0)+"</a>	                                        	                                    </div>")}}),this.ajaxAction({url:"//safe.jd.com/user/paymentpassword/getUserSafeInfo.action",callback:function(a){var c,b=a.safeLevel+1;switch(b){case 6:c="\u9ad8",$("#up").hide();break;case 5:c="\u8f83\u9ad8",$("#up").hide();break;case 4:c="\u4e2d";break;case 3:c="\u8f83\u4f4e";break;case 2:c="\u4f4e";break;default:c="\u5f88\u5371\u9669"}$("#cla").attr("class","safe-rank0"+b),$("#rank-text").attr("class","rank-text ftx-0"+b).text(c)}}),this.ajaxAction({url:"//btshow.jd.com/ious/queryBT.do",data:{sourceType:135},callback:function(b){if(3==b.btList[0].status){var d="3"===b.btList[0].btType?"btTPL2":"btTPL1";a.ajaxAction({url:"//home.jd.com/2014/data/netbank/iou.action",dataType:"jsonp",callback:function(a){var e={debt:a.needPayTotal.toFixed(2),limit:a.permLimit,href:b.btList[0].btUrl};$("#baitiao-info").html(c[d].process(e))}})}else{var e={bTitle:"\u4eac\u4e1c\u767d\u6761",bStatus:"\u6fc0\u6d3b\u767d\u6761\u4eab\u514d\u606f",href:b.btList[0].btUrl};$("#baitiao-info").html(c.btTPL0.process(e))}}}),this.ajaxAction({url:"//trade.jr.jd.com/centre/accountcoffer.action",callback:function(b){$("#jinku-info").html(c.xjkTPL.process(b)),$("#jinku-info .btn-hide").bind("click",function(){a.ajaxAction({url:"//home.jd.com/2014/data/store/bstatus.action",data:{"class":"jkhidden"},dataType:"jsonp",callback:function(){$("#jinku-info").addClass("jkhidden")}})}),$("#jinku-info .btn-show").bind("click",function(){a.ajaxAction({url:"//home.jd.com/2014/data/store/bstatus.action",data:{"class":""},dataType:"jsonp",callback:function(){$("#jinku-info").removeClass("jkhidden")}})})}})},ajaxAction:function(a){$.ajax({url:a.url,dataType:a.dataType||"jsonp",timeout:2500,scriptCharset:a.scriptCharset,data:a.data||{},success:function(b){a.callback(b)},error:function(a,b,c){console.info(c)}})}}),new c;var d={setCookie:function(a,b,c){var d=c;var e=new Date;e.setTime(e.getTime()+24*d*60*60*1e3),document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()+";"},getCookie:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!=b?b[2]:""}};var e=function(){$(".u-account").find(".u-account-clouds")&&$(".u-account").find(".u-account-clouds").remove(),d.setCookie("userInfoaccountclouds",2,9999)};2==d.getCookie("userInfoaccountclouds")?$(".u-account").find(".u-account-clouds")&&$(".u-account").find(".u-account-clouds").remove():(d.setCookie("userInfoaccountclouds",1,9999),$(".u-account-fix").after('<div class="u-account-clouds"></div>'),setTimeout(function(){$(".u-account-clouds").append('<div class="u-account-clouds-clear clearfix"><a href="javascript:void(0)" class="u-account-clouds-close"></a><div class="clearfix"></div></div><div class="u-account-clouds-content"><h3>\u7528\u6237\u540d\u53ef\u4ee5\u4fee\u6539\u5566\uff01</h3><p>\u7528\u6237\u540d\u662f\u4f60\u4eac\u4e1c\u8d26\u6237\u7684\u6c38\u4e45\u767b\u5f55\u540d,\u5feb\u8bbe\u7f6e\u4e00\u4e2a\u6e05\u6670\u80fd\u8bb0\u4f4f\u7684\u7528\u6237\u540d\u5427~</p><a href="//i.jd.com/user/info" class="u-account-clouds-fix" target="_blank">\u4fee\u6539\u7528\u6237\u540d</a></div>')},200)),$(".u-account-clouds-close").live("click",function(){e()}),$(".u-account-clouds-fix").live("click",function(){e()}),$(".u-account-fix").live("click",function(){e()})});/* order-list.js Date:2017-03-07 16:09:33 */
seajs.use(["//misc.360buyimg.com/user/myjd-2015/js/Class","jdf/1.0.0/unit/trimPath/1.0.0/trimPath.js"],function(a){var b=new a;b.extend({orderTPL:'<colgroup>							<col class="col-1">							<col class="col-2">							<col class="col-3">							<col class="col-4">							<col class="col-5">							<col>						</colgroup>						{for item in data}						{if item_index<3}						<tbody class="fore${item_index}">							<tr>								<td clstag="homepage|keycount|home2013|Homedd${1*item_index+1}">									<div class="img-list">										${item.WareImgUrl.split("</a>").length > 3?item.WareImgUrl.split("</a>").slice(0, 3).join("") + "</a><span class=more-icon></span>":item.WareImgUrl}									</div>								</td>								<td><div class="u-name">${item.CustomerName}</div></td>								<td>${item.ShouldPay}<br>${item.IdPaymentTypeName}</td>								<td><span class="ftx-03">${item.DateSubmit}</span></td>								${item.StateMsg.replace(/(onmouse[^>]+)/g, "orderid=\'" + item.OrderId + "\' orderstatus=\'" + item.OrderStatus + "\' ordertype=\'" + item.OrderType + "\' ordership=\'" + item.OrderShip + "\' orderurl=\'" + item.OrderInfoUrl + "\'")}							    <td clstag="homepage|keycount|home2013|Homeddck${1*item_index+1}" class="order-doi">${item.StateBtn}</td>							</tr>						</tbody>						{/if}						{/for}',tipsTPL:'<div class="prompt-01">						<div class="pc">							<div class="close" onclick="$(this).parent().parent().hide()"></div>							<dl>								<dt>\u5904\u7406\u65f6\u95f4</dt>								<dd>\u5904\u7406\u4fe1\u606f</dd>							</dl>							<ul>								{for item in data}									{if item.shipId}										<li class="pr-more">										    <div class="fore1">&nbsp;</div>										    <div class="fore2">\u8fd0\u5355\u53f7\uff1a${item.shipId}<br>\u4fe1\u606f\u6765\u6e90\uff1a<strong>${item.thirdName}</strong><em class="icon-show"></em></div>										</li>										<li class="third-li">										    <ul>										        {for level1 in item.orderTrackShowList}										        <li>										            <div class="fore1">${level1.CreationTime}</div>										            <div class="fore2">${level1.Content}</div>										        </li>										        {/for}										    </ul>										</li>									{else}										{for level1 in item.orderTrackShowList}                                        <li>                                            <div class="fore1">${level1.CreationTime}</div>                                            <div class="fore2">${level1.Content}</div>                                        </li>                                        {/for}									{/if}								{/for}							</ul>						</div>						<div class="p-arrow p-arrow-left"></div>					</div>'}),b.include({init:function(){var a=this;$.ajax({url:"//order.jd.com/lazy/getOrderListJson.action",dataType:"jsonp",timeout:2500,scriptCharset:"gbk",success:function(c){if(c.info&&c.info.length){var d=$(".tb-order table");d.html(b.orderTPL.process({data:c.info})),$(".tb-order .nocont-box").hide(),a.bindEvent(d)}},error:function(){}})},bindEvent:function(a){var b=this;$(".tooltip").hover(function(){var c=$(this).attr("orderid");var d=$(this).attr("ordertype");var e=$(this).attr("orderstatus");var f=$(this).attr("ordership");var g=$(this).attr("orderurl");$(".prompt-01",$(".tooltip[orderid="+c+"]",a)).size()?$(".prompt-01",this).show():b.loadData(c,d,e,f,g,a)},function(){$(".prompt-01").hide()})},loadData:function(a,b,c,d,e,f){$.ajax({url:"//order.jd.com/lazy/getOrderTrackInfoForNewList.action",dataType:"jsonp",data:{orderId:a,orderType:b,orderStatus:c,pin:decodeURIComponent(readCookie("pin"))},scriptCharset:"gbk",success:function(b){var c=c='<div class="p-tit">\u666e\u901a\u5feb\u9012</div>';var g='<div class="logistics-cont"><ul>';var h=b.info;var i=h.orderTrackGroupInfoList;var j;var k=h.deliveryTip;if(i&&i.length){var m,n,l=0;for(var o=i.length,p=o-1;p>-1;p--){if(m=i[p],n=m.orderTrackShowList,j=m.shipId,0==m.groupType){if(j){var q="";switch(d){case"65":q="\u4eac\u4e1c\u914d\u9001";break;case"64":q="\u4e0a\u95e8\u81ea\u63d0";break;default:q="\u666e\u901a\u5feb\u9012"}c='<div class="p-tit">'+q+"&nbsp;&nbsp;&nbsp;\u8fd0\u5355\u53f7\uff1a"+j+"</div>"}}else 1==m.groupType&&(c='<div class="p-tit">'+m.thirdName+"&nbsp;&nbsp;&nbsp;\u8fd0\u5355\u53f7\uff1a"+j+"</div>");var r="";if(n){if(l++,6>l){var s=1==l?"first":"";r+='<li class="'+s+'"><i class="node-icon"></i><a href="'+(e||"javascript:void(0);")+'" target="_blank">'+n[n.length-1].Content+"</a>"+(k?"<br/>"+k:"")+'<div class="ftx-13">'+n[n.length-1].CreationTime+"</div></li>"}for(var t=n.length,u=t-2,v=t-7,v=v>-1?v:-1;u>v;u--){if(l++,l>5){r+='<li><i class="node-icon"></i><a href="'+(e||"javascript:void(0);")+'" target="_blank">\u67e5\u770b\u66f4\u591a</a></li>';break}r+='<li><i class="node-icon"></i><a href="'+(e||"javascript:void(0);")+'" target="_blank">'+n[u].Content+'</a><div class="ftx-13">'+n[u].CreationTime+"</div></li>"}if(h.success&&i&&i.length||h.success&&k||(g+='<li class="first"><i class="node-icon"></i>\u60a8\u63d0\u4ea4\u4e86\u8ba2\u5355\uff0c\u8bf7\u7b49\u5f85\u7cfb\u7edf\u786e\u8ba4'),g+=r,l>5)break}}}g+="</ul></div>";var w='<div class="prompt-01"><div class="pc">'+c+g+'<div class="p-arrow p-arrow-left" style="top: 25px;"></div></div></div>';$(".tooltip[orderid="+a+"]",f).append(w).find(".prompt-01").show()}})}}),new b});/* user-myjd-2015 server.js Date:2015-03-19 14:26:11 */
seajs.use(["jdf/1.0.0/ui/switchable/1.0.0/switchable"],function(){$("#quick-ser").switchable({navItem:"ftab-item",navSelectedClass:"curr",mainClass:"f-tab-con",callback:function(a){$("iframe",this.main[a]).each(function(){var a=$(this).attr("data-src");"done"!=a&&($(this).attr("data-src","done"),$(this).attr("src",a))})}})});
/* user-myjd-2015 economical.js md5:a61c650111a79acba6337d44c5a70a48 */
seajs.use(["user/myjd-2015/js/fas"],function(){pageConfig.asyncScript("//nfa.jd.com/loadFa.js?aid=2_102_4806-2_102_4807-2_102_4808-2_102_4809-2_102_4810-2_102_4811-2_0_7083","","gbk")});
/* user-myjd-2015 history.js Date:2016-04-14 12:37:28 */
seajs.use(["user/myjd-2015/js/Class","user/myjd-2015/js/Recommend","user/myjd-2015/js/Slider"],function(a,b,c){var d='<div class="history-con">						<a class="prev ctrl" ><b></b></a>						<a class="next ctrl"><b></b></a>						<div class="slider-show" >							<div class="slider-show-ctn" >								<ul>									{for item in data}									<li data-clk="${item.clk}">										<div class="history-item">											<div class="p-img">												<a href="//item.jd.com/${item.sku}.html" target="_blank"><img width="50" height="50" data-lazyload="${pageConfig.FN_GetImageDomain(item.sku)}n3/${item.img}" alt="${item.t}" class="err-product"></a>											</div>											<div class="p-price">{if item.jp}\uffe5${item.jp}{else}\u6682\u65e0\u62a5\u4ef7{/if}</div>										</div>									</li>									{/for}								</ul>							</div>						</div>					</div>					<div class="history-progress">						<div class="progress-cont" style="width:60%;"><b></b></div>					</div>';b.historyList("","202001",d,$("#history .mc"),9,function(){new c({container:".history-con",sliderContainer:".slider-show-ctn",screenToCount:[{max:1262,count:3},{range:[1050,1100],count:6},{min:990,count:5}],imgAttr:"data-lazyload",complete:function(){}})})});
/* user-myjd-2015 fol-goods.js Date:2016-04-15 10:57:52 */
seajs.use(["user/myjd-2015/js/Class","user/myjd-2015/js/Recommend","user/myjd-2015/js/Slider"],function(a,b,c){var d=new a;d.extend({concernTPL:'<a class="prev ctrl" ><b></b></a>							<a class="next ctrl"><b></b></a>							<div class="slider-show" >								<div class="slider-show-ctn" >									<ul>										{for item in data}										<li>											<div class="fol-item">												<div class="p-img">												<a href="//item.jd.com/${item.productId}.html" target="_blank" clstag="click|keycount|myhome|skuguanzhutu0${item_index}"  title="${item.productName}">													<img class="err-product" width="130" src="//misc.360buyimg.com/lib/img/e/blank.gif" data-src="${pageConfig.FN_GetImageDomain(item.productId)}/n3/${item.productLogo}" alt="${item.productName}">												</a>												</div>												{if item.currentPrice>=0}												<div class="p-price">{if item.currentPrice}\uffe5${item.currentPrice.toFixed(2)}{else}\u6682\u65e0\u62a5\u4ef7{/if}  {if (item.followPrice - item.currentPrice)>0}<span class="icon-down">\u76f4\u964d</span>{else}{/if}</div>												{if (item.followPrice-item.currentPrice)>0}<div class="p-cut">\u964d\u4ef7\uffe5${((100*item.followPrice-100*item.currentPrice)/100).toFixed(2)}</div>{else}{/if}												{else}												<div class="p-price">\u6682\u65e0\u62a5\u4ef7</div>												{/if}											</div>										</li>										{/for}									</ul>								</div>							</div>',recommendTPL:'<a class="prev ctrl" ><b></b></a>							<a class="next ctrl"><b></b></a>							<div class="slider-show" >								<div class="slider-show-ctn" >									<ul>										{for item in data}										<li data-clk="${item.clk}">											<div class="fol-item">												<div class="p-img">												<a title="${item.t}" href="//item.jd.com/${item.sku}.html" target="_blank">													<img class="err-product" width="130" src="//misc.360buyimg.com/lib/img/e/blank.gif" data-src="${pageConfig.FN_GetImageDomain(item.sku)}/n3/${item.img}" alt="${item.t}">												</a>												</div>												{if item.jp>=0}												<div class="p-price">{if item.jp}\uffe5${item.jp}{else}\u6682\u65e0\u62a5\u4ef7{/if}  {if (item.mp - item.jp)>0}<span class="icon-down">\u76f4\u964d</span>{else}{/if}</div>												{if (item.mp-item.jp)>0}<div class="p-cut">\u964d\u4ef7\uffe5${((100*item.mp-100*item.jp)/100).toFixed(2)}</div>{else}{/if}												{else}												<div class="p-price">\u6682\u65e0\u62a5\u4ef7</div>												{/if}											</div>										</li>										{/for}									</ul>								</div>							</div>'}),d.include({init:function(a,b){b.empty().append(d.concernTPL.process({data:a}))}}),$.ajax({url:"//t.jd.com/product/myFollowProductList.action",dataType:"jsonp",scriptCharset:"utf-8",success:function(a){if(a.length>0){{new d(a,$("#fol-p-con"))}{new c({container:"#fol-p-con",sliderContainer:".slider-show-ctn",imgAttr:"data-src",complete:function(){}})}$("#fol-goods .nocont-fol").hide()}else b.guessFavs("","202002",d.recommendTPL,$("#fol-p-con"),function(){new c({container:"#fol-p-con",sliderContainer:".slider-show-ctn",imgAttr:"data-src",complete:function(){}})})}}),$.ajax({url:"//follow-soa.jd.com/rpc/product/queryForReduceProductCount",dataType:"jsonp",data:{sysName:"home.jd.com"},timeout:2500,success:function(a){$(".fol-goods ul.extra-l li:first em").text(a.data)},error:function(a,b,c){console.info(c)}}),$.ajax({url:"//follow-soa.jd.com/rpc/product/queryForSaleProductCount",dataType:"jsonp",data:{sysName:"home.jd.com"},timeout:2500,success:function(a){$(".fol-goods ul.extra-l li:eq(1) em").text(a.data)},error:function(a,b,c){console.info(c)}}),$.ajax({url:"//follow-soa.jd.com/rpc/product/queryForStockProductCount",dataType:"jsonp",data:{sysName:"home.jd.com"},timeout:2500,success:function(a){$(".fol-goods ul.extra-l li:eq(2) em").text(a.data)},error:function(a,b,c){console.info(c)}})});
/* user-myjd-2015 fa-main.js Date:2016-04-14 12:40:37 */
!function(){var a="497";$.ajax({url:"//x.jd.com/ShowInterface?",data:{ad_ids:a+":1,1:1",r:"39719279",ad_type:"8",debug:"0",spread_type:"1",location_info:"0",template:"0"},dataType:"jsonp",success:function(b){var c=[];for(var d=0,e=b[a].length;e>d;d++)c.push('<div class="da-list">                                <img id="'+b[a][d].material_id+'" width="0" height="0" border="0" src="'+b[a][d].exposal_url+'" style="position: absolute; top: 0px; left: 0px;visibility: hidden;">                                <a title="'+b[a][d].ad_title+'" href="'+b[a][d].click_url+'">                                    <img alt="'+b[a][d].ad_title+'" width="100%" src="//img30.360buyimg.com/pop/'+b[a][d].image_url+'" alt="">                                </a>                            </div>');setTimeout(function(){$("#da-main").append(c.join(""))},1e3)}})}();
/* user-myjd-2015 m-album.js Date:2016-07-26 15:20:52 */
seajs.use(["user/myjd-2015/js/Class","jdf/1.0.0/unit/trimPath/1.0.0/trimPath.js","jdf/2.0.0/ui/slider/1.0.0/slider"],function(a){var b=new a;b.extend({albumListTPL:'<li class="album-item" _id="${albumId}"><div class="item-inner"><div class="ab-name"><a href="${albumURL}" clstag="homepage|keycount|home2013|Homewhatname">${name}</a></div><div class="ab-info"><a href="${userURL}" class="ab-creator" clstag="homepage|keycount|home2013|Homewhatname"><i></i><em>${nickname}</em></a><div class="ab-operate1">{if isHasUpvote}<a href="javascript:void(0);" target="_self" class="btn-like btn-liked" _id="${albumId}" clstag="homepage|keycount|home2013|Homewhatzan"><i class="btnico"></i><em class="btntxt">${upvoteCount}</em></a>{else}<a href="javascript:void(0);" target="_self" class="btn-like" _id="${albumId}" clstag="homepage|keycount|home2013|Homewhatzan"><i class="btnico"></i><em class="btntxt">${upvoteCount}</em></a>{/if}{if isHasFollow}<a href="javascript:void(0);" target="_self" class="btn-follow btn-followed" _id="${albumId}" clstag="homepage|keycount|home2013|Homewhatguanzhu"><i class="btnico"></i><em class="btntxt">${followCount}</em></a>{else}<a href="javascript:void(0);" target="_self" class="btn-follow" _id="${albumId}" clstag="homepage|keycount|home2013|Homewhatguanzhu"><i class="btnico"></i><em class="btntxt">${followCount}</em></a>{/if}</div></div><div class="ab-goods"><div class="ab-goods-cover"><a target="_blank" href="${albumURL}" title="" clstag="homepage|keycount|home2013|Homewhatsku"><img width="160" height="160" src="${pic}"></a></div><div class="ab-goods-list"><div class="ab-goods-ul">{for data in skuList}<div class="ab-goods-item"><a target="_blank" title="${data.name}" href="${albumURL}"  clstag="homepage|keycount|home2013|Homewhatsku"><img width="74" height="74" src="${data.pic}"></a></div>{/for}</div><a href="${albumURL}" target="_blank" class="goods-num"  clstag="homepage|keycount|home2013|Homewhatsku">${skuCount}</a></div></div></div></li>'}),b.include({init:function(){this.initData(),this.initEvent()},initData:function(){var a=this;this.ajaxAction({url:"//home.jd.com/2014/data/wtb/list.action",callback:function(c){var d=c.returnObj;if(!d)return void $("#albumSlider").parents(".mod-main").hide();if(d&&!d.length)$("#albumSlider").parents(".mod-main").hide();else{var e="";for(var f=0,g=d.length;g>f;f++)e+=b.albumListTPL.process(d[f]);$(".album-list").html(e)}a.initSliderEvent()},fcallback:function(){$("#albumSlider").parents(".mod-main").hide()}})},initEvent:function(){var a=this;$("#albumSlider").delegate(".btn-like","click",function(){var b=$(this);b.hasClass("btn-liked")||a.ajaxAction({url:"//home.jd.com/2014/data/wtb/upvote.action?groupId="+$(this).attr("_id"),callback:function(c){$(".btntxt",b).html(c.returnObj),b.addClass("btn-liked"),a.addNum(b)}})}),$("#albumSlider").delegate(".btn-follow","click",function(){var b=$(this);$(this).hasClass("btn-followed")||a.ajaxAction({url:"//home.jd.com/2014/data/wtb/follow.action?groupId="+$(this).attr("_id"),callback:function(c){$(".btntxt",b).html(c.returnObj),b.addClass("btn-followed"),a.addNum(b)}})})},addNum:function(a){$(".tip-fadeout").length>0?$(".tip-fadeout").show():$("body").append('<div class="tip-fadeout">+1</div>'),$(".tip-fadeout").offset({top:$(a).offset().top-10,left:$(a).offset().left+25}),$(".tip-fadeout").animate({top:$(".tip-fadeout").css("top").replace("px","")-10}).fadeOut()},initSliderEvent:function(){$("#albumSlider").slider({contentMainEl:".album-list",contentEl:".album-item",hasPageBut:!0,nextEl:$(".slider-next"),prevEl:$(".slider-prev"),butDisabledCls:"slider-disable",hasOverflow:!0,speed:500,contentWidth:$(window).width()<1280?404:374,contentHeight:221,visible:2,step:2}),$(window).resize(function(){$("#albumSlider").getSlider().init({contentWidth:$(window).width()<1280?404:374})})},ajaxAction:function(a){$.ajax({url:a.url,dataType:a.dataType||"jsonp",timeout:2500,scriptCharset:a.scriptCharset,data:a.data||{},success:function(b){a.callback(b)},error:function(b,c,d){a.fcallback(),console.info(d)}})}}),new b});
/* user-myjd-2015 julike.js Date:2017-06-22 10:15:16 */
seajs.use(["//misc.360buyimg.com/product/module/tools","//misc.360buyimg.com/user/myjd-2015/widget/julike/templet","//misc.360buyimg.com/jdf/1.0.0/unit/trimPath/1.0.0/trimPath.js","//misc.360buyimg.com/jdf/1.0.0/ui/switchable/1.0.0/switchable","//misc.360buyimg.com/jdf/1.0.0/ui/dialog/1.0.0/dialog","//misc.360buyimg.com/jdf/1.0.0/ui/lazyload/1.0.0/lazyload"],function(a,b){var g={GOODSSECKILL:12,GOODSALBUM:10,VIPCUT:14,VIP:13,DYNAMIC:21,FEATURE:23,SHOPSECKILL:22,COUPON:24,COMBINE:31,TRYOUTACT:15,TRYOUTREPORT:16,YUYUE:17,YUSALE:18,ONESECKILL:19,SHAIDAN:34,SYSNAME:"home.jd.com",init:function(){this.goodsSkus=[],this.seckillTime=[],this.followCont=[],this.dataNum=0,this.perNum=0,this.queryId=0,this.loadFlag=!1,this.tempHtml="",this.initEl(),this.initData()},initEl:function(){var a='<div class="mod-main"><div class="mt"><h3>\u805a\u559c\u6b22</h3><div class="extra-r"><a href="//all.jd.com" target="_blank" clstag="homepage|keycount|home2013|JHCKGD">\u67e5\u770b\u66f4\u591a&gt;</a></div></div><div class="mc"><div id="julike" class="julike-loading"></div></div></div>';$("#extra-goods").after(a)},initData:function(){var a=this;a.renderWaterfallData(0),a.bindEvent()},renderWaterfallData:function(a){var c=this;c.tempHtml="",c.goodsSkus=[],c.seckillTime=[],$.ajax({url:"//all-soa.jd.com/rest/aggregation/queryUserContentRelation",data:{sysName:c.SYSNAME,queryId:a,area:readCookie("ipLoc-djd")},dataType:"jsonp",timeout:4e3,success:function(e){if(e.success){var f=e.data;var g=f.list;var h=f.recomendList;c.queryId=f.nextQueryId;var i=!1;if(f?g?-1!=f.nextQueryId||g.length||(i=!0):i=!0:i=!0,i){var j=$("#julike .julike-item").length;if(j&&30!=j)$("#julike").append(b.julikeEndTPL);else if($("#julike").removeClass("julike-loading").append(b.julikeEmptyTPL),h.length){var k="";for(var l=0,m=h.length;m>l;l++)if(h[l].status){var n=h[l].bizData;n.aggregationDate=h[l].aggregationDate,n.source=h[l].source,n.followContent=h[l].followContent,n.bType=h[l].businessType,n.businessId=n.bType==c.VIPCUT||n.bType==c.VIP?h[l].queryId:h[l].businessId,n.isfail=!1;var o=h[l].businessType;c.tempHtml+=d(k,o,n)}$("#julike").append(b.julikeRecomentTPL),$("#julike").append(c.tempHtml),c.renderPrice(),c.renderTime(),c.initEvent(),$("#julike").lazyload()}return}var k="";var p=g.length;for(var l=0;p>l;l++){if(g[l].status){var n=g[l].bizData;n.aggregationDate=g[l].aggregationDate,n.source=g[l].source,n.businessId=g[l].businessId,n.bType=g[l].businessType,n.businessId=n.bType==c.VIPCUT||n.bType==c.VIP?g[l].queryId:g[l].businessId,n.followContent=g[l].followContent,n.isfail=!1;var q={businessId:g[l].businessId,businessType:g[l].businessType};c.followCont.push(q);var o=g[l].businessType;c.tempHtml+=d(k,o,n)}if(c.dataNum++,c.dataNum>=30){c.loadFlag=!1,c.tempHtml+=b.julikeEndMoreTPL;break}}-1==f.nextQueryId&&30!=c.dataNum&&(c.tempHtml+=b.julikeEndTPL),c.dataNum<30&&(c.loadFlag=!0),0==a&&$("#julike").removeClass("julike-loading"),$("#julike").append(c.tempHtml),c.renderPrice(),c.renderTime(),c.initEvent(),$("#julike").lazyload()}else $("#julike").removeClass("julike-loading").append(b.julikeErrorTPL)},error:function(){$("#julike").removeClass("julike-loading").append(b.julikeErrorTPL)}});function d(a,d,e){switch(d){case c.GOODSSECKILL:c.goodsSkus.push(e.sku);var f={sku:e.sku,remainTime:e.remainTime,type:"killType"+e.seckillType};c.seckillTime.push(f),a+=b.julikeSeckillTPL.process(e);break;case c.GOODSALBUM:a+=b.julikeAlbumTPL.process(e);break;case c.VIPCUT:c.goodsSkus.push(e.sku),a+=b.julikeVipCutTPL.process(e);break;case c.VIP:c.goodsSkus.push(e.sku),a+=b.julikeVipTPL.process(e);break;case c.DYNAMIC:for(var g=0,h=e.skus.length;h>g;g++)c.goodsSkus.push(e.skus[g].sku);a+=b.julikeDynamicTPL.process(e);break;case c.FEATURE:a+=b.julikeFeatureTPL.process(e);break;case c.SHOPSECKILL:var h=e.skus.length;if(h>1){var f={sku:e.venderId,remainTime:e.remainTime,type:""};c.seckillTime.push(f);for(var g=0;h>g;g++)c.goodsSkus.push(e.skus[g].sku);a+=b.julikeShopMultiSeckillTPL.process(e)}else{c.goodsSkus.push(e.skus[0].sku);var i=!1;e.skus[0].progressBar&&(i=!0),e.isShowProgress=i;var f={sku:e.skus[0].sku,remainTime:e.skus[0].remainTime,type:"killType"+e.skus[0].skuKillType};c.seckillTime.push(f),a+=b.julikeShopSeckillTPL.process(e)}break;case c.COUPON:a+=b.julikeCouponTPL.process(e);break;case c.COMBINE:a+=b.julikeCombineTPL.process(e);break;case c.TRYOUTACT:var f={sku:e.activityId,remainTime:e.lastTime,format:"h:m",type:"actType"+e.status};c.seckillTime.push(f),a+=b.juliketryOutActTPL.process(e);break;case c.TRYOUTREPORT:a+=b.juliketryOutReportTPL.process(e);break;case c.SHAIDAN:a+=b.julikeshaiDanTPL.process(e);break;case c.YUYUE:c.goodsSkus.push(e.skuId);var f={sku:e.skuId,remainTime:e.remainTime,format:"h:m",type:"yuYueType"+e.status};c.seckillTime.push(f),a+=b.julikeYuyueTPL.process(e);break;case c.YUSALE:a+=b.julikeYusaleTPL.process(e);var f={sku:e.skuId,remainTime:e.remainTime,format:"h:m",type:"yuSaleType"+e.presaleStatus};c.seckillTime.push(f);break;case c.ONESECKILL:c.goodsSkus.push(e.skuId),a+=b.julikeOneSeckillTPL.process(e);break;default:a+=b.julikeErrorTPL}return a}},renderPrice:function(){var b=this;a.getPrice(b.goodsSkus,function(a){for(var c=0,d=a.length;d>c;c++){var e=parseFloat(a[c].p);var f=parseFloat(a[c].op);var g=$(".p-"+a[c].sku);var h=g.find(".p-price");var i=$(".f-num",h);var j=$(".del",h);if(-1==e)i.addClass("fz-18").html("\u6682\u65e0\u62a5\u4ef7");else{var k=b.formatPrice(e.toFixed(2));if(i.html(k),j.length){var l=b.formatPrice(f.toFixed(2));j.html(l)}}var m=g.find(".v-num");if(m.length){var n=Number(m.text());if(-1==e)return i.addClass("fz-18").html("\u51fa\u95ee\u9898\u5566\uff0c\u5237\u65b0\u540e\u518d\u8bd5\u8bd5"),void g.find(".vip-opbtns").html("");n>e.toFixed(2)&&(g.find(".f-v-num").addClass("fz-18").text("\u8be5\u4ef7\u683c\u5df2\u8fc7\u671f"),g.find(".vip-opbtns").html(""),g.find(".f-num").html(""))}var o=g.find(".cut");if(o.length)if(-1==e)g.find(".cut").text("\u8be5\u5546\u54c1\u5df2\u4e0b\u67dc\uff0c\u975e\u5e38\u62b1\u6b49\uff01"),g.find(".vip-opbtns").html("");else{var p=Number(o.data("cut"));var q=Number(o.data("off"));var r=(p-q).toFixed(2);var s=(p-e).toFixed(2);s>0?g.find(".cut").text("\u6bd4\u52a0\u5165\u8d2d\u7269\u8f66\u65f6\u964d\u4ef7"+s+"\u5143"):(g.find(".f-num").html('<span class="f-del"><em>&yen;</em>'+r+'</span><span class="fz-18 ml10">\u8be5\u4ef7\u683c\u5df2\u8fc7\u671f</span>'),g.find(".vip-opbtns").html(""),g.find(".v-hide").show())}}})},formatPrice:function(a){return a.match(/^\d/)?"<em>&yen;</em>"+a:a},addZero:function(a){return 10>a?"0"+a:a},getRTime:function(a,b){var c=this;var d=Math.floor(a/60/60/24);var e=Math.floor(a/60/60%24);var f=Math.floor(a/60%60);var g=Math.floor(a%60);var h="";switch(b){case"h:m":h='<span class="day">'+c.addZero(d)+'</span><span class="split">\u5929</span><span class="hour">'+c.addZero(e)+'</span><span class="split">\u65f6</span><span class="minute">'+c.addZero(f)+'</span><span class="split">\u5206</span><span class="second">'+c.addZero(g)+'</span><span class="split">\u79d2</span>';break;default:h='<span class="day">'+c.addZero(d)+'</span><span class="split">:</span><span class="hour">'+c.addZero(e)+'</span><span class="split">:</span><span class="minute">'+c.addZero(f)+'</span><span class="split">:</span><span class="second">'+c.addZero(g)+"</span>"}return h},renderTime:function(){var a=this;if(a.seckillTime.length)for(var b=0,c=a.seckillTime.length;c>b;b++){var d=a.seckillTime[b].remainTime;var e=a.seckillTime[b].format;if(a.seckillTime[b].type){var f=a.seckillTime[b].type;if($timeEle=$(".time-"+a.seckillTime[b].sku+"-"+d),1>d)$timeEle.html(a.getRTime(0),e),a.changeSecKillBtnText($timeEle,f);else{var g=a.getRTime(d,e);$timeEle.html(g),a.reduceTime($timeEle,d,f,e)}}else{$timeEle=$(".time-"+a.seckillTime[b].sku);var g=a.getRTime(d,e);$timeEle.html(g),a.reduceTime($timeEle,d,0,e)}}},reduceTime:function(a,b,c,d){var e=this;var f=setInterval(function(){b-=1,timeCont=e.getRTime(b,d),a.html(timeCont),1>b&&(clearInterval(f),c&&e.changeSecKillBtnText(a,c))},1e3)},changeSecKillBtnText:function(a,b){var c=a.parents(".julike-item").find(".btn");switch(b){case"killType1":c.text("\u79d2\u6740\u5df2\u5f00\u59cb");break;case"killType2":c.addClass("btn-skcomm").text("\u79d2\u6740\u5df2\u7ed3\u675f")}},initEvent:function(){var a=this;$(".coupon-list").switchable({type:"slider",direction:"left",mainClass:"coupon-panel",contentClass:"coupon-panel-main",prevClass:"coupon-prev",nextClass:"coupon-next",speed:600,visible:3,seamlessLoop:!0,includeMargin:20,autoPlay:0,stayTime:3e3,playDirection:"next",hasPage:!0}),$(".ju-opbtns .dl").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),a.queryId>0&&a.loadFlag&&a.renderWaterfallData(a.queryId)},bindEvent:function(){var a=this;$("#main").delegate(".btn-unfollow-shop","click",function(){var b=$(this).data("venderid");$(this).parents(".julike-item").addClass("julike-shopwrap-"+b);var c=$(this).parent().next().html();var d={opid:b,type:"\u5e97\u94fa",content:c,confirmEle:"unfollow-shop-confirm"};a.alertDlg(d)}),$("#main").delegate(".btn-unfollow-goods","click",function(){var b=$(this).data("sku");$(this).parents(".julike-item").addClass("julike-goodswrap-"+b);var c=$(this).parent().next().html();var d={opid:b,type:"\u5546\u54c1",content:c,confirmEle:"unfollow-goods-confirm"};a.alertDlg(d)}),$("#main").delegate(".btn-unfollow-cont","click",function(){var b=$(this);var c=Number($(this).attr("class").match(/\d+/g));var d=$(this).data("type");$.ajax({url:"//all-soa.jd.com/rest/aggregation/content/unFollow",data:{sysName:a.SYSNAME,type:d,businessId:c},dataType:"jsonp",timeout:4e3,success:function(c){var d=c.data;d?b.removeClass("btn-unfollow-cont").addClass("btn-follow-cont").html("<i></i>\u5173\u6ce8\u8be5\u5185\u5bb9"):a.alertFailDlg("\u53d6\u6d88\u5173\u6ce8\u5931\u8d25")}})}),$("#main").delegate(".btn-follow-cont","click",function(){var b=$(this);var c=Number($(this).attr("class").match(/\d+/g));var d=$(this).data("type");$.ajax({url:"//all-soa.jd.com/rest/aggregation/content/follow",data:{sysName:a.SYSNAME,type:d,businessId:c},dataType:"jsonp",timeout:4e3,success:function(c){var d=c.data;var e=c.code;d?b.removeClass("btn-follow-cont").addClass("btn-unfollow-cont").html("<i></i>\u53d6\u6d88\u5173\u6ce8"):"F0402"==e?(b.removeClass("btn-follow-cont").addClass("btn-unfollow-cont").html("<i></i>\u53d6\u6d88\u5173\u6ce8"),a.alertFailDlg("\u5df2\u5173\u6ce8")):a.alertFailDlg("\u5173\u6ce8\u5931\u8d25")}})}),$("body").delegate(".unfollow-shop-confirm","click",function(){var b=$(this).attr("_opid");var c="//follow-soa.jd.com/rpc/vender/unfollow?sysName="+a.SYSNAME+"&venderId="+b;var d=$(".julike-shopwrap-"+b);a.cancleFollow(c,d,b),d.removeClass("julike-shopwrap-"+b)}),$("body").delegate(".unfollow-goods-confirm","click",function(){var b=$(this).attr("_opid");var c=$(".julike-goodswrap-"+b);var d="//follow-soa.jd.com/rpc/product/unfollow?sysName="+a.SYSNAME+"&productId="+b;a.cancleFollow(d,c,b),c.removeClass("julike-goodswrap-"+b)}),$("body").delegate(".btn-julike-cancle","click",function(){$.closeDialog()})},cancleFollow:function(a,b,c){var d=this;$.ajax({url:a,dataType:"jsonp",timeout:4e3,success:function(a){if($.closeDialog(),a&&a.success&&a.data)b.hide("fast");else{$.closeDialog();var e=$(".julike-pitem-wrap",b).html();var f={opid:c,type:0,content:e,confirmEle:"btn-julike-cancle"};d.alertDlg(f)}},error:function(){}})},alertDlg:function(a){var c=a;var d=b.julikeCancelDialogTPL.process({msg:c});$("body").dialog({title:"\u63d0\u793a",width:400,type:"html",title:null,source:d,onReady:function(){$("body").lazyload()}})},alertFailDlg:function(a){var d=a;var e=b.julikeFollowFailTPL.process({msg:d});$.closeDialog(),$("body").dialog({width:200,type:"html",title:null,closeButton:!1,mainId:"faildlg",autoCloseTime:2,source:e})}};$(function(){g.init()})});